DEUDA TÉCNICA Y REFACTORIZACIÓN PENDIENTE
=========================================

FECHA REGISTRO: 29/01/2026
ESTADO: PENDIENTE
PRIORIDAD: MEDIA (Ejecutar en Fase 8: Pulido)

1. REFACTORIZACIÓN DE GEOIP SERVICE (Arquitectura Hexagonal)
------------------------------------------------------------
DESCRIPCIÓN:
Actualmente, `src/modules/auth/application/geo-ip.service.ts` importa y utiliza directamente la librería `geoip-lite`. Esto viola el Principio de Inversión de Dependencias, acoplando la lógica de negocio (Application Layer) con una implementación técnica específica.

ARCHIVOS AFECTADOS (ORIGEN):
- src/modules/auth/application/geo-ip.service.ts

OBJETIVO DEL CAMBIO:
Desacoplar la librería externa de la capa de aplicación.

PLAN DE ACCIÓN:
1.  Crear Interfaz de Abstracción:
    Ubicación: `src/common/interfaces/geo-provider.interface.ts`
    Contenido: Definir método `resolve(ip: string): GeoLocationResult | null`.

2.  Mover Implementación a Infraestructura:
    Ubicación: `src/infrastructure/geo/geoip-lite.service.ts` (o similar).
    Acción: Mover la lógica actual que usa `geoip-lite` aquí e implementar la interfaz `GeoProvider`.

3.  Actualizar Módulo de Infraestructura:
    Archivo: `src/infrastructure/geo/geo.module.ts`.
    Acción: Exportar el servicio.

4.  Inyección en Auth:
    Archivo: `src/modules/auth/auth.module.ts` y `src/modules/auth/application/auth.service.ts`.
    Acción: Inyectar `GeoProvider` en lugar de la clase concreta.

BENEFICIO:
Permitirá cambiar de proveedor de geolocalización (ej. a Google Maps API o MaxMind Web Service) sin tocar ni una línea de código de la lógica de autenticación.
